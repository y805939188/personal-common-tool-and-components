{"version":3,"file":"index.js","sources":["../../node_modules/@babel/runtime/helpers/typeof.js","../../node_modules/style-inject/dist/style-inject.es.js","../../src/component/my-input/index.tsx","../../src/component/index.tsx"],"sourcesContent":["function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { PureComponent, ChangeEvent } from 'react';\nimport Input, { InputProps } from 'antd/es/input';\nimport 'antd/es/input/style/index.css';\nimport './index.less';\n\nexport interface MyInputProps extends InputProps {\n  verification?: {\n    rule: 'number' | 'string' | RegExp;\n    errorText: string;\n  } | 'string' | 'number';\n}\n\ninterface IState {\n  validate: boolean;\n}\n\nconst RegExp1 = /^[0-9]+$/;\nconst RegExp2 = /^[a-zA-Z]+$/;\nclass MyInput extends PureComponent<MyInputProps, IState> {\n  private verificationRule: RegExp | null = null;\n  private errorText: string = '';\n  constructor(props: MyInputProps) {\n    super(props);\n    const { verification } = this.props;\n    this.initVerification(verification);\n    this.state = { validate: true };\n  }\n\n  private initVerification = (verification: MyInputProps['verification']) => {\n    if (!verification) return;\n    if (typeof verification === 'object') {\n      if (verification.rule === 'string') {\n        this.verificationRule = RegExp1;\n      } else if (verification.rule === 'number') {\n        this.verificationRule = RegExp2;\n      } else {\n        this.verificationRule = verification.rule;\n      }\n      this.errorText = verification.errorText || '';\n    } else if (verification === 'number') {\n      this.verificationRule = RegExp1;\n      this.errorText = '只允许输入number类型';\n    } else if (verification === 'string') {\n      this.verificationRule = RegExp2;\n      this.errorText = '只允许输入string类型';\n    } else {\n      this.verificationRule = null;\n      this.errorText = '';\n    }\n  }\n\n  private handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const { onChange } = this.props;\n    const value = e?.target?.value || '';\n    if (!this.verificationRule || !value) {\n      (!this.state.validate) && this.setState({ validate: true });\n      onChange && onChange(e);\n    } else {\n      const isValidate = this.verificationRule.test(value);\n      if (isValidate) {\n        this.setState({ validate: true });\n        onChange && onChange(e);\n      } else {\n        this.setState({ validate: false });\n      }\n    }\n  }\n\n  render = () => {\n    const { onChange, ...others } = this.props;\n    const { validate } = this.state;\n    return (\n      <div id=\"custom-input-verification-wrapper\" className={!validate ? 'error' : ''} >\n        <Input {...others} onChange={this.handleChange} />\n        {!validate && <span>{this.errorText}</span>}\n      </div>\n    )\n  }\n}\n\nexport default MyInput;\n","import React, { PureComponent, ReactElement, ReactNode, ChangeEvent } from 'react';\nimport Table, { TableProps, ColumnProps } from 'antd/es/table';\nimport Select, { SelectProps, OptionProps } from 'antd/es/select';\nimport { InputProps } from 'antd/es/input';\nimport MyInput, { MyInputProps } from './my-input';\nimport cloneDeep from 'lodash/cloneDeep';\nimport 'antd/es/table/style/index.css';\nimport 'antd/es/select/style/index.css';\nimport 'antd/es/pagination/style/index.css';\nimport 'antd/es/button/style/index.css';\nimport './index.less';\n\ntype ISelectBase0 = { value: any; isDefault?: boolean, extraProps?: OptionProps };\ntype ISelectBase1 = number | string | ReactElement | ISelectBase0;\ntype ISelectBase2 = { data: ISelectBase1[]; extraProps?: SelectProps };\ntype ISelectDefault = (ISelectBase1[] | ISelectBase2)[];\n\ntype IInputBase0 = number | string;\ntype IInputBase1 = { value: IInputBase0; extraProps?: InputProps };\ntype IInputDefault = (IInputBase0 | IInputBase1)[];\n\ninterface IOptionsBase {\n  id: string | number;\n  title: string | React.ReactElement;\n  extraProps?: ColumnProps<any>;\n  verification?: MyInputProps['verification'];\n}\n\ninterface IOptionsBase0 extends IOptionsBase {\n  type?: 'input';\n  defaultData?: IInputDefault;\n}\n\ninterface IOptionsBase1 extends IOptionsBase {\n  type?: 'string';\n  defaultData?: (number | string | ReactElement)[];\n}\n\ninterface IOptionsBase2 extends IOptionsBase {\n  type?: 'select';\n  defaultData?: ISelectDefault;\n}\n\ninterface IOptionsBase3 extends IOptionsBase {\n  type?: 'custom';\n  defaultData?: any[];\n}\n\nexport type IOptions = IOptionsBase0 | IOptionsBase1 | IOptionsBase2 | IOptionsBase3;\n\ninterface IActionsProps extends ColumnProps<any> {\n  topInsertBtnText?: string;\n  bottomInsertBtnText?: string;\n  deleteBtnText?: string;\n}\n\nexport interface IProps extends TableProps<any> {\n  options: IOptions[];\n  topInsert?: boolean;\n  bottomInsert?: boolean;\n  allowDelete?: boolean;\n  actionProps?: IActionsProps;\n  width?: number | string;\n  height?: number | string;\n  serialNumber?: boolean;\n  serialNumberText?: string;\n  onDataChange?: (result: { [propname: string]: any }[]) => void;\n  onTableLoaded?: (result: { [propname: string]: any }[]) => void;\n}\n\ninterface IStates {\n  columns: ColumnProps<any>[];\n  dataSource: any[];\n}\n\ntype ITablePara = {\n  columns: ColumnProps<any>[];\n  dataSource: any[];\n}\n\nconst { Option } = Select;\nexport default class ReactTable extends PureComponent<IProps, IStates> {\n  private currentOptions: IProps['options'];\n  private result: { [prop: string]: any }[];\n  constructor(props: IProps) {\n    super(props);\n    const { options, columns: customColumns, dataSource: customDataSource } = props;\n    if (customColumns && customDataSource) {\n      this.state = { columns: customColumns, dataSource: customDataSource };\n      this.currentOptions = [];\n      this.result = [];\n    } else {\n      const { columns = [], dataSource = [] } = this.getTableProps(this.handleOptions(options));\n      this.currentOptions = cloneDeep(options);\n      this.state = { columns, dataSource };\n      this.result = this.handleResult(options);\n      // console.log('init初始值是', this.result)\n    }\n  }\n\n  componentDidMount = () => {\n    const { onTableLoaded } = this.props;\n    onTableLoaded && onTableLoaded(this.result);\n  }\n\n  private handleResult = (options: IOptions[]) => {\n    const defaultDataLengthMax = options.reduce((a, b) => {\n      const defaultData1 = a.defaultData;\n      const defaultData2 = b.defaultData;\n      if (!defaultData1 && defaultData2) return b;\n      if (defaultData1 && !defaultData2) return a;\n      if ((defaultData1 || []).length >= (defaultData2 || []).length) return a;\n      return b;\n    });\n    const resultData: any[] = new Array(defaultDataLengthMax?.defaultData?.length).fill(null);\n    options.forEach(item => {\n      const { id, type, defaultData } = item;\n      resultData.forEach((res, index) => {\n        const obj = resultData[index] || (resultData[index] = {});\n        if (!defaultData) return obj[id] = '';\n        const currentData = defaultData[index];\n        if (!currentData) return obj[id] = '';\n        if (type === 'input') {\n          if (typeof currentData === 'object') {\n            obj[id] = currentData.value || '';\n          } else {\n            obj[id] = currentData;\n          }\n        } else if (type === 'select') {\n          if (Array.isArray(currentData)) {\n            const temporaryData = currentData.find(item => item && item.isDefault);\n            obj[id] = temporaryData && temporaryData.value || '';\n          } else if (typeof currentData === 'object') {\n            const temporaryData = currentData.data && currentData.data.find((item: any) => item && item.isDefault);\n            obj[id] = temporaryData && temporaryData.value || '';\n          } else {\n            obj[id] = '';\n          }\n        } else {\n          obj[id] = currentData;\n        }\n      });\n    });\n    return resultData;\n  }\n\n  private getDefaultData = (key: string, index: number) => {\n    const options = this.currentOptions;\n    const { defaultData, type } = options.find(item => item.id === key) || {};\n    const data = (defaultData || [])[index];\n    switch (type) {\n      case 'input':\n        if (typeof data === 'object') {\n          return data.value || '';\n        } else {\n          return data;\n        }\n      case 'select':\n        if (Array.isArray(data)) {\n          const temporaryData = data.find(item => item && item.isDefault);\n          return temporaryData && temporaryData.value || '';\n        } else if (typeof data === 'object') {\n          const temporaryData = data.data && data.data.find((item: any) => item && item.isDefault);\n          return temporaryData && temporaryData.value || '';\n        } else {\n          return '';\n        }\n      case 'string':\n      case 'custom':\n      default: return data;\n    }\n  }\n\n  private handleInputChange = (id: string, content: IInputBase0 | IInputBase1, record: any, index: number, e: ChangeEvent<HTMLInputElement>) => {\n    this.result[index][id] = e.target?.value;\n    // console.log('改变输入框了', this.result);\n    const { onDataChange } = this.props;\n    onDataChange && onDataChange(this.result);\n  }\n\n  private handleSelectChange = (id: string, content: ISelectBase1[] | ISelectBase2, record: any, index: number, value: any) => {\n    this.result[index][id] = value;\n    // console.log('改变select狂了', this.result);\n    const { onDataChange } = this.props;\n    onDataChange && onDataChange(this.result);\n  }\n\n  private handleOptions = (options: IOptions[]): ITablePara => {\n    const columns: ColumnProps<any>[] = [];\n    const dataSource: any[] = [];\n    const temporaryIdObj: { [id: string]: true } = {};\n    options.forEach((option, index) => {\n      const { id, title, type = 'custom', defaultData = [], extraProps, verification } = option;\n      if (!id) return;\n      if (!temporaryIdObj[id]) {\n        temporaryIdObj[id] = true;\n      } else {\n        console.warn(`id为 ${id} 的出现重复`);\n        return;\n      }\n      const temporary: ColumnProps<any> = { ...extraProps };\n      temporary.title = title;\n      temporary.key = id;\n      temporary.dataIndex = String(id);\n      defaultData.forEach((data, index) => {\n        (!dataSource[index]) ? (dataSource[index] = { [id]: data }) : (dataSource[index][id] = data);\n        dataSource[index].key = `_${index}`;\n      });\n      switch (type) {\n        case 'input':\n          temporary.render = (text: IInputBase0 | IInputBase1, record: any, index: number): ReactNode => {\n            const handleFunction = this.handleInputChange.bind(this, id, text, record, index);\n            return (typeof text === 'object') ?\n              <MyInput verification={verification} onChange={handleFunction} defaultValue={text.value} {...text.extraProps} /> :\n              <MyInput verification={verification} onChange={handleFunction} defaultValue={text || ''} />\n          };\n          break;\n        case 'select':\n          temporary.render = (text: ISelectBase1[] | ISelectBase2, record: any, index: number): ReactNode => {\n            const childrenOptionsObj: {\n              OptionsComponents: ReactNode[];\n              defaultValue: any;\n              isInvalid: boolean;\n              selectDefaultProps: SelectProps;\n            } = {\n              OptionsComponents: [],\n              defaultValue: '',\n              isInvalid: false,\n              selectDefaultProps: {},\n            };\n            const getChildren = (data: ISelectBase1[]) => {\n              data.forEach((option, index: number) => {\n                const isObject = option && typeof option === 'object';\n                const value = isObject ? (option as ISelectBase0).value : option;\n                const optionProps = isObject ? (option as ISelectBase0).extraProps : {};\n                isObject && (option as ISelectBase0).isDefault && (childrenOptionsObj.defaultValue = value);\n                childrenOptionsObj.OptionsComponents.push(\n                  <Option key={`${value}_${index}`} value={value} {...optionProps} >{value}</Option>\n                );\n              });\n            };\n            if (Array.isArray(text)) {\n              getChildren(text);\n            } else if (text && typeof text === 'object') {\n              const { data, extraProps = {} } = text;\n              childrenOptionsObj.selectDefaultProps = extraProps;\n              getChildren(data);\n            } else {\n              childrenOptionsObj.isInvalid = true;\n            }\n            const handleFunction = this.handleSelectChange.bind(this, id, text, record, index);\n            return (\n              !childrenOptionsObj.isInvalid ? (\n                <Select\n                  onChange={handleFunction}\n                  className=\"pd4-react-business-table-select-wrapper\"\n                  defaultValue={childrenOptionsObj.defaultValue}\n                  { ...childrenOptionsObj.selectDefaultProps }\n                >\n                  {childrenOptionsObj.OptionsComponents}\n                </Select>) :\n                null\n            );\n          };\n          break;\n        case 'custom':\n          temporary.render = (text: any, record: any, index: number): ReactNode => (<>{text}</>);\n          break;\n        case 'string':\n        default:\n          break;\n      };\n      columns.push(temporary);\n    });\n    return { columns, dataSource };\n  }\n\n  private handleInsert = (type: 'top' | 'bottom', index: number, record: any) => {\n    const currentOptions = this.currentOptions;\n    const newDataSource = [...this.state.dataSource];\n    const newResultTemplate = newDataSource[index];\n    const newData = cloneDeep(newResultTemplate);\n    \n    newData.key = `_${+ new Date}`;\n    if (type === 'top') {\n      newDataSource.splice(index, 0, newData);\n      currentOptions.forEach(item => {\n        const temporaryArr = item.defaultData || (item.defaultData = []);\n        temporaryArr.splice(index, 0, temporaryArr[index]);\n      });\n      const resultObj = this.result[index] || {};\n      const temporaryObj: { [prop: string]: any } = {};\n      this.result.splice(index, 0, temporaryObj);\n      Object.keys(resultObj).forEach(key => {\n        temporaryObj[key] = this.getDefaultData(key, index) || \"\";\n      });\n    } else if (type === 'bottom') {\n      newDataSource.splice(index + 1, 0, newData);\n      currentOptions.forEach(item => {\n        const temporaryArr = item.defaultData || (item.defaultData = []);\n        temporaryArr.splice(index + 1, 0, temporaryArr[index]);\n      });\n      const resultObj = this.result[index] || {};\n      const temporaryObj: { [prop: string]: any } = {};\n      this.result.splice(index + 1, 0, temporaryObj);\n      Object.keys(resultObj).forEach(key => {\n        temporaryObj[key] = this.getDefaultData(key, index) || \"\";\n      });\n    }\n    // console.log('新的result是', this.result)\n    const { onDataChange } = this.props;\n    onDataChange && onDataChange(this.result);\n    this.setState({ dataSource: newDataSource });\n  }\n\n  private handleDelete = (index: number) => {\n    const currentOptions = this.currentOptions;\n    const newDataSource = [...this.state.dataSource];\n    newDataSource.splice(index, 1);\n    currentOptions.forEach(item => {\n      const temporaryArr = item.defaultData || (item.defaultData = []);\n      temporaryArr.splice(index, 1);\n    });\n    this.result.splice(index, 1);\n    // console.log('这里的result是', this.result);\n    const { onDataChange } = this.props;\n    onDataChange && onDataChange(this.result);\n    this.setState({ dataSource: newDataSource });\n  }\n\n  private getTableProps = (obj: { columns: ITablePara['columns'], dataSource: ITablePara['dataSource'] }): ITablePara => {\n    const { topInsert = true, bottomInsert = true, allowDelete = true, actionProps = {}, serialNumber = true, serialNumberText } = this.props;\n    if (!topInsert && !bottomInsert && !allowDelete) return { columns: obj.columns, dataSource: obj.dataSource };\n    const { title, key, render, topInsertBtnText, bottomInsertBtnText, deleteBtnText, ...others } = actionProps;\n    const temporaryColumns: ColumnProps<any> = {\n      title: title || '操作',\n      key: key || '__INTERNAL_ACTIONS__',\n      render: render || (\n        (text, record, index) => {\n          return (\n            <>\n              {topInsert && (\n                <span\n                  onClick={this.handleInsert.bind(this, 'top', index, record)}\n                  className=\"pd4-react-business-table-action-btn\"\n                >{topInsertBtnText || '上插一行'}</span>\n              )}\n              {bottomInsert && (\n                <span\n                  onClick={this.handleInsert.bind(this, 'bottom', index, record)}\n                  className=\"pd4-react-business-table-action-btn\"\n                >{bottomInsertBtnText || '下插一行'}</span>\n              )}\n              {allowDelete && (\n                <span\n                  onClick={this.handleDelete.bind(this, index)}\n                  className=\"pd4-react-business-table-action-btn\"\n                >{deleteBtnText || '删除'}</span>\n              )}\n            </>\n          )\n        }\n      ),\n      ...others,\n    };\n    obj.columns.push(temporaryColumns);\n    if (serialNumber) {\n      const temporaryColumns2: ColumnProps<any> = {\n        title: serialNumberText || '序号',\n        key: '__INTERNAL_SERIAL_NUMBER__',\n        render: (text, record, index) => {\n          return (<span className=\"pd4-react-business-table-serial-numebr\" >{index + 1}</span>)\n        },\n      };\n      obj.columns.unshift(temporaryColumns2);\n    }\n    return { columns: obj.columns, dataSource: obj.dataSource };\n  }\n\n  render() {\n    const { pagination = false, width, height, ...others } = this.props;\n    const { columns, dataSource } = this.state;\n    const style: any = {};\n    width && (style.width = width);\n    height && (style.height = height);\n    return (\n      <div {...style} id=\"pd4-react-business-table-wrapper\">\n        <Table pagination={pagination} columns={columns} dataSource={dataSource} {...others} />\n      </div>\n    );\n  }\n}\n"],"names":["RegExp1","RegExp2","__extends","props","_super","_this","verification","_typeof","rule","verificationRule","errorText","e","onChange","value","target","state","validate","setState","isValidate","test","_a","others","React","id","className","Input","handleChange","initVerification","PureComponent","Option","onTableLoaded","result","options","defaultDataLengthMax","reduce","a","b","defaultData1","defaultData","defaultData2","length","resultData","Array","fill","forEach","item","type","res","index","obj","currentData","isArray","temporaryData","find","isDefault","data","key","currentOptions","content","record","onDataChange","columns","dataSource","temporaryIdObj","option","title","_b","extraProps","console","warn","temporary","dataIndex","String","render","text","handleFunction","handleInputChange","bind","MyInput","defaultValue","childrenOptionsObj","OptionsComponents","isInvalid","selectDefaultProps","getChildren","isObject","optionProps","push","extraProps_1","handleSelectChange","Select","newDataSource","newResultTemplate","newData","cloneDeep","Date","splice","temporaryArr","resultObj","temporaryObj_1","Object","keys","getDefaultData","temporaryObj_2","topInsert","_c","bottomInsert","_d","allowDelete","_e","actionProps","_f","serialNumber","serialNumberText","topInsertBtnText","bottomInsertBtnText","deleteBtnText","temporaryColumns","onClick","handleInsert","handleDelete","temporaryColumns2","unshift","customColumns","customDataSource","handleResult","ReactTable","pagination","width","height","style","Table"],"mappings":"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"}